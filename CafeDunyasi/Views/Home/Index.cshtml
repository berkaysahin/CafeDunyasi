@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer localizer
@model IEnumerable<CafeDunyasi.Models.Posts>

@{ ViewData["Title"] = "Home Page"; }


<div class="form-group">
    <form method="post">
        <button type="submit" name="data" class="btn btn-primary" value="all">All</button>
    </form>
    <form name="PostName" method="post" style="width:175px">
        City: <select class="form-control" asp-items="new SelectList(ViewBag.Cities)" onchange="PostName.submit()" name="data">
        </select>
    </form>
</div>
<div style="clear:both;"></div>
@{
    int i = 0;
    var like = (List<PostLikes>)ViewData["Likes"];
}

@if (Model.Any())
{
    @foreach (var item in Model)
    {

        if (i % 2 == 0)
        {
            <div style="clear:left;"></div>
        }
        i++;

        <div class="post">
            <div class="up">
                <img src="@("~/images/BusinessImages/profile/" + @ViewBag.profileImg)" style="height:40px; width:40px auto; border-radius:20px" asp-append-version="true" />
                <a asp-controller="Profile" asp-action="Index" asp-route-data="@item.UserID">@ViewBag.BusinessName</a>
            </div>
            <img src="@("~/images/BusinessImages/post/" + item.Image)" class="img" asp-append-version="true" />
            <div class="bottom">
                @if (item.Description != "" && item.Description != null)
                {
                    <div>Description: @item.Description</div>
                }
            <form method="post">
                @foreach (var x in like)
                {

                    @if (x.PostID == item.Id)
                    {
                        @*<input type="hidden" id="postid" name="postid" value="@item.Id">*@
                        <button type="submit" name="data" style="all: unset; color: blue; -webkit-text-fill-color: blue; cursor: pointer; color:blue;" value="unlike"><i class="fa fa-heart" style="font-size:24px"></i></button>
                    }
                    else
                    {
                        <button type="submit" name="data" style="all: unset; color: blue; -webkit-text-fill-color: black; cursor: pointer; color:black;" value="liked"><i class="fa fa-heart" style="font-size:24px"></i></button>
                    }
                }
                @if (like.Count == 0)
                {
                    <button type="submit" name="data" style="all: unset; color: blue; -webkit-text-fill-color: black; cursor: pointer; color:black;" value="liked"><i class="fa fa-heart" style="font-size:24px"></i></button>
                }
            </form>
                    @item.LikeCount
                </div>
        </div>
    }
}
else
{
    <font style="font-size:28px">No posts yet.</font>
}